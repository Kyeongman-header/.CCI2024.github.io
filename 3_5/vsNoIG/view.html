<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comparison</title>
    <style>
        .keyword {
            font-size: 1.2em;
            font-weight: bold;
            margin-top: 20px;
        }
        hr {
            margin: 20px 0;
            border: 0;
            border-top: 1px solid #ccc;
        }
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
        }
        h1 {
            text-align: center;
        }
        .container {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
        }
        .story-box { /* story-title과 box를 묶는 컨테이너 */
            width: 45%; /* 각 박스가 차지하는 너비 */
        }
        .box {
            width: 100%; /* 부모 컨테이너 내에서 100% 너비 */
            padding: 20px;
            background-color: white;
            border: 1px solid #ccc;
            overflow: auto;
            height: 300px;
            resize: both;
        }
        hr {
            margin: 30px 0;
        }
        .questions {
            margin-top: 20px;
        }
        .questions p {
            font-size: 1.2em; /* 텍스트 크기를 키움 */
            margin-bottom: 10px;
        }
        .questions .highlight {
            font-weight: bold; /* 키워드를 굵게 처리 */
        }
        footer {
            margin-top: 20px;
            text-align: center;
        }
        .story-title {
        font-weight: bold;
        font-size: 1.2em;
        margin-bottom: 10px;
        text-align: center; /* 중앙 정렬 */
    }
    </style>
</head>
<body>

    <h1>vs NoIG-3.5 Comparison</h1>

    <div class="container">
        <div class="story-box"> <!-- Story 1을 위한 그룹 -->
            <div class="story-title">Story 1(Ours)</div>
            <div class="box" id="cci_box">
                <!-- CCI 파일 내용이 여기에 들어갑니다 -->
            </div>
        </div>
        <div class="story-box"> <!-- Story 2를 위한 그룹 -->
            <div class="story-title">Story 2(Baseline)</div>
            <div class="box" id="doc_box">
                <!-- DOC 파일 내용이 여기에 들어갑니다 -->
            </div>
        </div>
    </div>

    <hr>

    <div class="questions"> 
        <h2>Survey Questions</h2>
        <p><span class="highlight">1. Character-Coherent.</span> Which model’s final output better maintains the character’s personality?</p>
        <p><span class="highlight">2. Character-Vivid.</span> Which model’s final output depicts the character more vividly?</p>
        <p><span class="highlight">3. Coherence.</span> Which model’s final output has a more coherent story?</p>
        <p><span class="highlight">4. Concreteness.</span> Which model’s story elements are more concrete?</p>
        <p><span class="highlight">5. Novelty.</span> Which model’s story elements are more novel?</p>
    </div>

    <footer>
        <p>© 2024 A Character-Centric Creative Story Generation via Imagination</p>
    </footer>

    <script>
        // URL에서 폴더 경로와 파일 번호 가져오기
        const path = window.location.pathname.split('/');
        const folder = path[path.length - 3];
        const urlParams = new URLSearchParams(window.location.search);
        const comparisonNumber = urlParams.get('n') || '1';  // n 값이 없으면 1로 설정
        const comparisonType = path[path.length - 2];  // 예: 'vsDOC', 'vsNoIG', 'vsNoMW'
        
        // CCI와 DOC 파일 경로 동적으로 설정
        const cciFile = `https://www.2024cci.p-e.kr/${folder}/CCI_${folder}/CCI_${folder}_${comparisonNumber}.txt`;
        //const docFile = `https://raw.githubusercontent.com/your-username/your-repo/main/${folder}/DOC_${folder}_${comparisonNumber}.txt`;
        const docFile = `https://www.2024cci.p-e.kr/${folder}/${comparisonType === 'vsDOC' ? 'DOC' : comparisonType.split('vs')[1]}_${folder}/${comparisonType === 'vsDOC' ? 'DOC' : comparisonType.split('vs')[1]}_${folder}_${comparisonNumber}.txt`;

        // 파일 불러와서 내용 넣기
        fetch(cciFile)
            .then(response => response.text())
            .then(data => {
                // 키워드 배열 (여기에 필요한 키워드 추가 가능)
                const keywords = ["Title:", "Characters:", "Background:", "Main Plot:", "Story:"];

                // Background 관련 처리를 위한 정규식 (Background부터 다음 키워드 전까지)
                const backgroundRegex = /Background:(.*?)(?=Main Plot:|Story:|$)/gs;

                // 텍스트 내용 수정 (줄바꿈 및 키워드 강조)
                let formattedText = data;
                keywords.forEach(keyword => {
                    const regex = new RegExp(keyword, "g");
                    formattedText = formattedText.replace(regex, `<hr><span class="keyword">${keyword}</span>`);
                });

                // Background 관련 내용 추출 및 변환
                const backgroundMatches = formattedText.match(backgroundRegex);
                if (backgroundMatches) {
                    backgroundMatches.forEach(match => {
                        // 매치된 Background 섹션을 강조 (추출된 내용 포함)
                        const highlightedMatch = `<hr><span class="keyword"></span>${match.trim()}`;
                        formattedText = formattedText.replace(match, highlightedMatch);
                    });
                }

                // 변환된 내용을 텍스트 박스에 삽입
                document.getElementById('cci_box').innerHTML = formattedText;
            });

        fetch(docFile)
            .then(response => response.text())
            .then(data => {
                // 키워드 배열 (여기에 필요한 키워드 추가 가능)
                const keywords = ["Title:", "Characters:", "Background:", "Main Plot:", "Story:"];

                // Background 관련 처리를 위한 정규식 (Background부터 다음 키워드 전까지)
                const backgroundRegex = /Background:(.*?)(?=Main Plot:|Story:|$)/gs;

                // 텍스트 내용 수정 (줄바꿈 및 키워드 강조)
                let formattedText = data;
                keywords.forEach(keyword => {
                    const regex = new RegExp(keyword, "g");
                    formattedText = formattedText.replace(regex, `<hr><span class="keyword">${keyword}</span>`);
                });

                // Background 관련 내용 추출 및 변환
                const backgroundMatches = formattedText.match(backgroundRegex);
                if (backgroundMatches) {
                    backgroundMatches.forEach(match => {
                        // 매치된 Background 섹션을 강조 (추출된 내용 포함)
                        const highlightedMatch = `<hr><span class="keyword"></span>${match.trim()}`;
                        formattedText = formattedText.replace(match, highlightedMatch);
                    });
                }

                // 변환된 내용을 텍스트 박스에 삽입
                document.getElementById('doc_box').innerHTML = formattedText;
            });
    </script>
</body>
</html>
